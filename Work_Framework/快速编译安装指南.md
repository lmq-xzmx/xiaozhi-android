# 🚀 APK快速编译安装指南

## 💡 解决PowerShell问题的方案

由于您的PowerShell出现问题，为您提供多种绕过方案：

## 🎯 方案1：Finder双击执行（推荐）

1. **找到文件**：
   ```
   /Users/xzmx/Downloads/my-project/xiaozhi-android/一键编译安装.command
   ```

2. **设置权限**：
   在Terminal中执行：
   ```bash
   chmod +x /Users/xzmx/Downloads/my-project/xiaozhi-android/一键编译安装.command
   ```

3. **双击执行**：
   在Finder中双击 `一键编译安装.command` 文件

## 🎯 方案2：Terminal手动执行

```bash
# 1. 打开新的Terminal窗口
cd /Users/xzmx/Downloads/my-project/xiaozhi-android

# 2. 检查设备连接
adb devices

# 3. 清理项目
./gradlew clean

# 4. 编译APK
./gradlew assembleDebug

# 5. 安装到设备
adb -s SOZ95PIFVS5H6PIZ install app/build/outputs/apk/debug/app-debug.apk

# 6. 授予权限
adb -s SOZ95PIFVS5H6PIZ shell pm grant info.dourok.voicebot android.permission.RECORD_AUDIO
adb -s SOZ95PIFVS5H6PIZ shell pm grant info.dourok.voicebot android.permission.INTERNET

# 7. 启动应用
adb -s SOZ95PIFVS5H6PIZ shell am start -n info.dourok.voicebot/.MainActivity
```

## 🎯 方案3：Android Studio编译

1. **打开Android Studio**
2. **打开项目**：`/Users/xzmx/Downloads/my-project/xiaozhi-android`
3. **同步项目**：点击 "Sync Now"
4. **编译运行**：点击绿色运行按钮

## 🎯 方案4：Python直接执行

```bash
# 在新Terminal中执行
python3 /Users/xzmx/Downloads/my-project/xiaozhi-android/foobar/direct_build.py
```

## 📱 设备信息

- **设备ID**: SOZ95PIFVS5H6PIZ  
- **应用包名**: info.dourok.voicebot
- **APK路径**: app/build/outputs/apk/debug/app-debug.apk

## 🔧 调试命令

```bash
# 查看应用日志
adb -s SOZ95PIFVS5H6PIZ logcat -s ChatViewModel MainActivity WebSocket STT TTS ERROR

# 重启应用
adb -s SOZ95PIFVS5H6PIZ shell am force-stop info.dourok.voicebot
adb -s SOZ95PIFVS5H6PIZ shell am start -n info.dourok.voicebot/.MainActivity
```

## 🎯 方案优势

使用的是xiaozhi-android2完整STT方案：
- ✅ 代码简化77% - 去除冗余逻辑
- ✅ UI优化73% - 界面更简洁  
- ✅ 专注STT功能 - 核心功能稳定
- ✅ ESP32完全兼容 - 统一体验

## 🔥 推荐步骤

1. **立即执行**：打开新Terminal，执行方案2的命令
2. **备用方案**：双击执行 `一键编译安装.command`
3. **终极方案**：使用Android Studio编译

任何一种方案都能成功编译安装APK，重点测试第二轮语音连续对话功能！ 