# ğŸ¤ è¯­éŸ³åŠŸèƒ½æµ‹è¯•æŒ‡å¯¼

## ğŸ“‹ é—®é¢˜è¯Šæ–­ç»“æœ

### âœ… **å·²ä¿®å¤**ï¼š
- **å½•éŸ³æƒé™**ï¼šå·²æˆåŠŸæˆäºˆ `android.permission.RECORD_AUDIO`
- **WebSocketè¿æ¥**ï¼šæ­£å¸¸å»ºç«‹å¹¶ä¿æŒè¿æ¥
- **åº”ç”¨çŠ¶æ€**ï¼šæ˜¾ç¤º"âœ… å°±ç»ª"è€Œä¸æ˜¯"Idle"
- **æ“ä½œæŒ‰é’®**ï¼šæä¾›"å¼€å§‹ç›‘å¬"æŒ‰é’®

### âš ï¸ **å¾…éªŒè¯**ï¼š
- **è¯­éŸ³è¯†åˆ«**ï¼šéœ€è¦æµ‹è¯•éº¦å…‹é£å’Œè¯­éŸ³åé¦ˆ
- **æœåŠ¡å™¨å“åº”**ï¼šéœ€è¦ç¡®è®¤STTåŠŸèƒ½æ­£å¸¸å·¥ä½œ

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### æ­¥éª¤1ï¼šç¡®è®¤åº”ç”¨çŠ¶æ€
1. æ‰“å¼€åº”ç”¨
2. ç¡®è®¤æ˜¾ç¤ºï¼š`âœ… å°±ç»ª`
3. ç¡®è®¤æœ‰"å¼€å§‹ç›‘å¬"æŒ‰é’®

### æ­¥éª¤2ï¼šå¼€å§‹è¯­éŸ³æµ‹è¯•
1. **ç‚¹å‡»"å¼€å§‹ç›‘å¬"æŒ‰é’®**
2. **è§‚å¯ŸçŠ¶æ€å˜ä¸º**ï¼š`ğŸ¤ ç›‘å¬ä¸­`
3. **æ¸…æ™°åœ°è¯´è¯**ï¼š
   - "ä½ å¥½ï¼Œå°æ™º"
   - "ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·"
   - "ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±"

### æ­¥éª¤3ï¼šè§‚å¯Ÿåé¦ˆ
**æ­£å¸¸æƒ…å†µåº”è¯¥çœ‹åˆ°**ï¼š
- çŠ¶æ€å˜ä¸ºï¼š`ğŸ”Š å›å¤ä¸­`
- èŠå¤©åŒºåŸŸæ˜¾ç¤ºç”¨æˆ·è¯´çš„è¯
- æ¥ç€æ˜¾ç¤ºAIçš„å›å¤
- çŠ¶æ€è¿”å›ï¼š`âœ… å°±ç»ª`

### æ­¥éª¤4ï¼šå¦‚æœæ²¡æœ‰åé¦ˆ
1. **æ£€æŸ¥éº¦å…‹é£**ï¼šç¡®è®¤è®¾å¤‡éº¦å…‹é£å·¥ä½œæ­£å¸¸
2. **é‡è¯•æ“ä½œ**ï¼šç‚¹å‡»"åœæ­¢ç›‘å¬"ï¼Œå†ç‚¹å‡»"å¼€å§‹ç›‘å¬"
3. **è¯´è¯æ›´æ¸…æ™°**ï¼šé è¿‘éº¦å…‹é£ï¼Œæ¸…æ™°å‘éŸ³
4. **ç­‰å¾…æ—¶é—´**ï¼šç»™æœåŠ¡å™¨3-5ç§’å¤„ç†æ—¶é—´

## ğŸ” å®æ—¶ç›‘æ§

### ç›‘æ§å‘½ä»¤
```bash
adb -s SOZ95PIFVS5H6PIZ logcat | grep -E "stt|STT|listen|speak|audio|WS.*Received"
```

### æœŸæœ›çš„æ—¥å¿—è¾“å‡º
```
ChatViewModel: Device state set to LISTENING        # å¼€å§‹ç›‘å¬
AudioRecorder: Starting audio recording             # éŸ³é¢‘å½•åˆ¶å¯åŠ¨
AudioRecorder: Audio frames processed: 50           # éŸ³é¢‘æ•°æ®å¤„ç†
WS: Sending audio frame #1: 120 bytes              # å‘é€éŸ³é¢‘æ•°æ®
WS: Received text message: {"type":"stt",...}      # æ”¶åˆ°è¯­éŸ³è¯†åˆ«ç»“æœ
ChatViewModel: >> ä½ å¥½å°æ™º                           # æ˜¾ç¤ºç”¨æˆ·è¯­éŸ³
WS: Received text message: {"type":"tts",...}      # æ”¶åˆ°TTSå›å¤
ChatViewModel: << ä½ å¥½ï¼Œæˆ‘æ˜¯å°æ™º...                  # æ˜¾ç¤ºAIå›å¤
```

## âš ï¸ æ•…éšœæ’é™¤

### å¦‚æœçŠ¶æ€ä¸å˜ä¸º"ç›‘å¬ä¸­"
**å¯èƒ½åŸå› **ï¼š
- éŸ³é¢‘æƒé™é—®é¢˜
- AudioRecorderåˆå§‹åŒ–å¤±è´¥
- WebSocketè¿æ¥æ–­å¼€

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. é‡æ–°å¯åŠ¨åº”ç”¨
2. æ£€æŸ¥æƒé™è®¾ç½®
3. ç¡®è®¤ç½‘ç»œè¿æ¥

### å¦‚æœç›‘å¬ä¸­ä½†æ— åé¦ˆ
**å¯èƒ½åŸå› **ï¼š
- éº¦å…‹é£ç¡¬ä»¶é—®é¢˜
- éŸ³é¢‘ç¼–ç å¤±è´¥
- æœåŠ¡å™¨STTæœåŠ¡å¼‚å¸¸

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æµ‹è¯•å…¶ä»–å½•éŸ³åº”ç”¨ç¡®è®¤éº¦å…‹é£å·¥ä½œ
2. æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€ï¼š`curl http://47.122.144.73:8000/xiaozhi/v1/`
3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—

### å¦‚æœæ”¶åˆ°è¯†åˆ«ç»“æœä½†æ— AIå›å¤
**å¯èƒ½åŸå› **ï¼š
- æœåŠ¡å™¨LLMæœåŠ¡å¼‚å¸¸
- TTSæœåŠ¡é—®é¢˜
- ç½‘ç»œå»¶è¿Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç­‰å¾…æ›´é•¿æ—¶é—´ï¼ˆ10-15ç§’ï¼‰
2. æ£€æŸ¥æœåŠ¡å™¨è´Ÿè½½
3. é‡è¯•ä¸åŒçš„é—®é¢˜

## ğŸ¯ é¢„æœŸç»“æœ

**æˆåŠŸçš„è¯­éŸ³äº¤äº’åº”è¯¥æ˜¯è¿™æ ·çš„**ï¼š

1. ğŸ‘† ç‚¹å‡»"å¼€å§‹ç›‘å¬" â†’ `ğŸ¤ ç›‘å¬ä¸­`
2. ğŸ—£ï¸ è¯´è¯ï¼š"ä½ å¥½å°æ™º"
3. ğŸ‘€ çœ‹åˆ°ç”¨æˆ·æ¶ˆæ¯ï¼š"ä½ å¥½å°æ™º"
4. âš¡ çŠ¶æ€å˜ä¸ºï¼š`ğŸ”Š å›å¤ä¸­`
5. ğŸ¤– çœ‹åˆ°AIå›å¤ï¼š"ä½ å¥½ï¼Œæˆ‘æ˜¯å°æ™º..."
6. âœ… çŠ¶æ€è¿”å›ï¼š`âœ… å°±ç»ª`

**æ•´ä¸ªè¿‡ç¨‹å¤§çº¦éœ€è¦3-8ç§’å®Œæˆã€‚**

## ğŸ“ å¦‚æœä»æœ‰é—®é¢˜

1. **é‡æ–°å¯åŠ¨åº”ç”¨**
2. **æ£€æŸ¥ç½‘ç»œè¿æ¥**
3. **ç¡®è®¤æœåŠ¡å™¨çŠ¶æ€**
4. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**ï¼šè¿è¡Œç›‘æ§å‘½ä»¤
5. **è”ç³»æŠ€æœ¯æ”¯æŒ**ï¼šæä¾›æ—¥å¿—ä¿¡æ¯

---

**è®°ä½ï¼šç°åœ¨å½•éŸ³æƒé™å·²ç»æˆäºˆï¼Œè¯­éŸ³åŠŸèƒ½åº”è¯¥æ­£å¸¸å·¥ä½œäº†ï¼** ğŸ‰ 